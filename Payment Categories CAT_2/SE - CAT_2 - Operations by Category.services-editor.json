{"createdAt":"2021-05-17T16:46:48.814","modifiedAt":"2021-07-04T12:36:21.868","createdBy":"TAS","modifiedBy":"TAS","title":"SE - CAT_2 - Operations by Category","provider":"ServicesEditorBackendServiceProvider","tags":["Raven service"],"systemTags":["dataentry","dataentry","published-as-datasource","services-editor","RESERVED_DOCUMENT"],"name":"SE - CAT_2 - Operations by Category","type":"services-editor","saved":false,"id":"cbfba75a-daef-454f-ad0e-77663cb65cb5","previewId":null,"content":{"definition":{"id":"cbfba75a-daef-454f-ad0e-77663cb65cb5","title":"SE - CAT_2 - Operations by Category","useBaseUrl":true,"publishAsDatasource":true,"serverSideDatasource":false,"dataEntryEnabled":true,"downloadEnabled":false,"expectedResultType":"Table","validated":false,"mandatoryParameters":[],"skipOnEmptyQueryString":false,"includeRawData":false,"schema":[{"name":"unprocessedDebitCounter","type":"number","value":0},{"name":"pendingDebitCounter","type":"number","value":10},{"name":"pendingAmountCredit","type":"number","value":0},{"name":"forecastCreditCounter","type":"number","value":0},{"name":"kind","type":"string","value":"paymentcategoryresource"},{"name":"settledAmountDebit","type":"number","value":614100803},{"name":"unprocessedCreditCounter","type":"number","value":0},{"name":"unprocessedAmountCredit","type":"number","value":0},{"name":"codIntCategory","type":"string","value":null},{"name":"settledAmountCredit","type":"number","value":275000000},{"name":"pendingAmountDebit","type":"number","value":108043963.92},{"name":"subCategoryDescription","type":"string","value":null},{"name":"idCategory","type":"number","value":921},{"name":"pendingCreditCounter","type":"number","value":0},{"name":"categoryDescription","type":"string","value":"FI Transfer"},{"name":"forecastAmountCredit","type":"number","value":0},{"name":"settledDebitCounter","type":"number","value":11},{"name":"forecastAmountDebit","type":"number","value":0},{"name":"codCategory","type":"string","value":"CORR"},{"name":"codSubCategory","type":"string","value":null},{"name":"codAccountService","type":"string","value":null},{"name":"unprocessedAmountDebit","type":"number","value":0},{"name":"settledCreditCounter","type":"number","value":3},{"name":"forecastDebitCounter","type":"number","value":0},{"name":"category","type":"string","value":"923 - CA"}],"selectCall":{"method":"Get","enabled":true,"serverSide":true,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{"result":{"fields":[null]}}},"expectedResult":null,"syntax":"standard","code":"var payments = custom('result').payments;\n//return payments\n//return custom('result')\nvar total = {\n    \"unprocessedDebitCounter\": null,\n    \"pendingDebitCounter\": null,\n    \"pendingAmountCredit\": custom('result')['pendingTotalAmountCredit'],\n    \"forecastCreditCounter\": null,\n    \"kind\": null,\n    \"settledAmountDebit\": custom('result')['settledTotalAmountDebit'],\n    \"unprocessedCreditCounter\": null,\n    \"unprocessedAmountCredit\": custom('result')['unprocessedTotalAmountCredit'],\n    \"codIntCategory\": null,\n    \"settledAmountCredit\": custom('result')['settledTotalAmountCredit'],\n    \"pendingAmountDebit\": custom('result')['pendingTotalAmountDebit'],\n    \"subCategoryDescription\": null,\n    \"idCategory\": null,\n    \"pendingCreditCounter\": null,\n    \"categoryDescription\": null,\n    \"forecastAmountCredit\": custom('result')['forecastTotalAmountCredit'],\n    \"settledDebitCounter\": null,\n    \"forecastAmountDebit\": custom('result')['forecastTotalAmountDebit'],\n    \"codCategory\": \"Total\",\n    \"codSubCategory\": null,\n    \"codAccountService\": null,\n    \"unprocessedAmountDebit\": custom('result')['unprocessedTotalAmountDebit'],\n    \"settledCreditCounter\": null,\n    \"forecastDebitCounter\": null\n  }\npayments.push(total)\nvar netAmount = {\n    \"unprocessedDebitCounter\": null,\n    \"pendingDebitCounter\": null,\n    \"pendingAmountCredit\": custom('result')['pendingTotalAmountCredit'] - custom('result')['pendingTotalAmountDebit'],\n    \"forecastCreditCounter\": null,\n    \"kind\": null,\n    \"settledAmountDebit\": null,\n    \"unprocessedCreditCounter\": null,\n    \"unprocessedAmountCredit\": custom('result')['unprocessedTotalAmountCredit'] - custom('result')['unprocessedTotalAmountDebit'],\n    \"codIntCategory\": null,\n    \"settledAmountCredit\": custom('result')['settledTotalAmountCredit'] - custom('result')['settledTotalAmountDebit'],\n    \"pendingAmountDebit\": null,\n    \"subCategoryDescription\": null,\n    \"idCategory\": null,\n    \"pendingCreditCounter\": null,\n    \"categoryDescription\": 'net',\n    \"forecastAmountCredit\": custom('result')['forecastTotalAmountCredit'] - custom('result')['forecastTotalAmountDebit'],\n    \"settledDebitCounter\": null,\n    \"forecastAmountDebit\": null,\n    \"codCategory\": \"Total\",\n    \"codSubCategory\": null,\n    \"codAccountService\": null,\n    \"unprocessedAmountDebit\": null,\n    \"settledCreditCounter\": null,\n    \"forecastDebitCounter\": null\n  }\npayments.push(netAmount)\nreturn _.map(payments,function(i){\ni.category = i.idCategory + ' - ' + i.categoryDescription\n  return i\n})"},"headers":[],"address":{"schema":{"datasource":{},"parameter":{"bicParticipant":{"id":"71c4611b-9beb-6e26-78e1-87a5beb555c8"},"codCurrency":{"id":"b1c3c2e1-d39a-af86-285d-b0a2ca387612"},"codIntCategory":{"id":"c5946bb2-6bd4-ca8e-8eb2-944496034b32"},"codService":{"id":"a913b82b-ccd5-8786-95a0-51d9df6477e0"},"counterpart":{"id":"0f5d2b81-7726-9cef-6d77-24a63ec3c1f3"},"dateFrom":{"id":"d4bb1e25-c343-2bdd-5ebd-ddf4bfd81d9e"},"dateTo":{"id":"ee9c4fb4-4a4c-518a-d254-e0e52b8e775d"},"idAccount":{"id":"d7154a38-626c-b8c3-9b55-9884e7ac9c93"},"codIntSubCategory":{"id":"6869fad4-237b-80a2-1e87-d6bb852dc4b2"}},"systemParameter":{},"custom":{}},"expectedResult":null,"syntax":"web-template","code":"foundation/rs/paymentcategories?bicParticipant=<%= parameter('bicParticipant') %>&codCurrency=<%= parameter('codCurrency') %>&codIntCategory=<%= parameter('codIntCategory') %>&codService=<%= parameter('codService') %>&counterpart=<%= parameter('counterpart') %>&dateFrom=<%= format(parameter('dateFrom'),'yyyy-MM-dd') %>&dateTo=<%= format(parameter('dateTo'),'yyyy-MM-dd') %>&idAccount=<%= parameter('idAccount') %><%=(parameter('codIntSubCategory') && parameter('codIntSubCategory').trim().length>0)?'&codIntSubCategory='+encodeURIComponent(parameter('codIntSubCategory')):''%>"},"type":"Select"},"insertCall":{"method":"Put","enabled":false,"serverSide":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Insert"},"updateCall":{"method":"Post","enabled":false,"serverSide":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Update"},"deleteCall":{"method":"Delete","enabled":false,"serverSide":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Delete"},"createCall":{"method":"Get","enabled":false,"serverSide":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Create"},"serverSideOptions":{"id":"5b12726e-b6cc-e051-81de-edeaf95e339f","columns":[],"rows":[],"originalRows":[],"dataEntryRunTypes":[],"datasourceType":"Standard","autoRefreshEnabled":false,"autoRefreshSystem":false,"autoRefreshTime":60,"remoteSort":"","page":1,"isBusy":false,"isFiltered":false,"isServerSide":false,"hasError":false,"splitItems":[],"rowCount":100,"pageSize":10,"tags":[],"parameters":[]},"pageExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"pageSizeExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"recordCountExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"sortingExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"downloadExp":{"schema":{},"expectedResult":null,"syntax":"web-template"},"baseUrlId":"Aquarius Services"},"parameters":[{"id":"71c4611b-9beb-6e26-78e1-87a5beb555c8","name":"bicParticipant","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":""},{"id":"b1c3c2e1-d39a-af86-285d-b0a2ca387612","name":"codCurrency","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"EUR"},{"id":"c5946bb2-6bd4-ca8e-8eb2-944496034b32","name":"codIntCategory","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":""},{"id":"a913b82b-ccd5-8786-95a0-51d9df6477e0","name":"codService","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"CORR"},{"id":"0f5d2b81-7726-9cef-6d77-24a63ec3c1f3","name":"counterpart","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":""},{"id":"d4bb1e25-c343-2bdd-5ebd-ddf4bfd81d9e","name":"dateFrom","description":"","systemType":"","defaultValue":"1970-01-01T00:00:00.000Z","lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"date","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"2015-12-31T23:00:00.000Z"},{"id":"ee9c4fb4-4a4c-518a-d254-e0e52b8e775d","name":"dateTo","description":"","systemType":"","defaultValue":"1970-01-01T00:00:00.000Z","lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"date","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"2021-05-29T22:00:00.000Z"},{"id":"d7154a38-626c-b8c3-9b55-9884e7ac9c93","name":"idAccount","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"number","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":null},{"id":"6869fad4-237b-80a2-1e87-d6bb852dc4b2","name":"codIntSubCategory","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":""}]}}