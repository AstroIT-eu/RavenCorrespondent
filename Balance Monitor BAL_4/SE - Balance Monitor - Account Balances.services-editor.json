{"createdAt":"2021-05-18T15:31:14.566","modifiedAt":"2021-11-03T11:04:02.279","createdBy":"TAS","modifiedBy":"TAS","title":"SE - Balance Monitor - Account Balances","provider":"SpringBackendServiceProvider","tags":[],"systemTags":["published-as-datasource","services-editor","RESERVED_DOCUMENT"],"name":"SE - Balance Monitor - Account Balances","type":"services-editor","saved":true,"id":"0058dc71-b8f7-40c0-a330-6da6cef250c2","previewId":null,"content":{"definition":{"id":"0058dc71-b8f7-40c0-a330-6da6cef250c2","title":"SE - Balance Monitor - Account Balances","useBaseUrl":true,"publishAsDatasource":true,"serverSideDatasource":true,"dataEntryEnabled":false,"downloadEnabled":false,"expectedResultType":"Table","validated":true,"mandatoryParameters":[],"skipOnEmptyQueryString":false,"includeRawData":false,"emptyParametersToEmptyString":false,"schema":[{"name":"serviceType","type":"string","value":"CORR"},{"name":"idAccount","type":"number","value":1383},{"name":"masterAccount","type":"string","value":null},{"name":"startOfDayBalanceTimestamp","type":"string","value":"2017-06-15 00:00:00"},{"name":"toBeSettledPreadvicePayment","type":"number","value":0},{"name":"toBeSettledPayments","type":"number","value":0},{"name":"totalUnmatchedPayments","type":"number","value":0},{"name":"error","type":"string","value":"Errore per la riga 0"},{"name":"totalPaymentsUnmatched","type":"number","value":1225},{"name":"endOfDayBalance","type":"number","value":0},{"name":"legalEntity","type":"string","value":"IRVTBEBB"},{"name":"valueBalance","type":"number","value":2162375962.13833},{"name":"toBeSettledSI","type":"number","value":0},{"name":"correspondentType","type":"string","value":"NOSTRO"},{"name":"client","type":"string","value":"GENODEFF"},{"name":"currency","type":"string","value":"GBP"},{"name":"id","type":"number","value":626844},{"name":"toBeSettledCA","type":"number","value":0},{"name":"bookBalance","type":"number","value":2162375962.13833},{"name":"floor","type":"string","value":null},{"name":"ceiling","type":"string","value":null},{"name":"toBeSettledForecastSI","type":"number","value":0},{"name":"systemAccountCode","type":"string","value":"5188728260"},{"name":"startOfDayBalance","type":"number","value":974382376.10851},{"name":"kind","type":"string","value":"accountbalancesresource"},{"name":"toBeSettledPreadviceCA","type":"number","value":0},{"name":"accountOwner","type":"string","value":"08094/WWWBDEFF"},{"name":"toBeSettledPreadviceSI","type":"number","value":0},{"name":"projectedBalance","type":"number","value":2162375962.13833},{"name":"legalEntityAccountCode","type":"string","value":"0066000009"},{"name":"toBeSettledForecastPayment","type":"number","value":0},{"name":"nostroType","type":"string","value":"DEPOSITORY"},{"name":"toBeSettledBalance","type":"number","value":0},{"name":"countervalueBalance","type":"number","value":2711850830.75},{"name":"toBeSettledForecastCA","type":"number","value":0},{"name":"valueBalanceTimestamp","type":"string","value":"2017-06-15 00:00:00"},{"name":"goldProjected","type":"number","value":5633},{"name":"endOfDayBalanceTimestamp","type":"string","value":null},{"name":"businessDate","type":"date","value":"2021-09-16T22:00:00.000Z"}],"selectCall":{"method":"Get","enabled":true,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{"datasource":{},"parameter":{"businessDate":{"id":"b8dbeecb-61e1-04ed-1b5d-9193c62d0172"}},"systemParameter":{},"custom":{"result":{"fields":[null]}}},"expectedResult":null,"syntax":"standard","code":"//custom('result').items;\nvar x=toArray(custom('result').items);\nconsole.log(\"acc balances:\",x);\nvar toret=[]\nx?.forEach(\n  \t\t\tfunction addme(element){  \n                 console.log(element)\n                 element.businessDate = parameter('businessDate')\n              \t toret.push(element)\n             }\n         );\n\nreturn toret;"},"headers":[],"address":{"schema":{"datasource":{},"parameter":{"take":{"id":"54d497d9-1aff-c1ae-9528-a711625e6af8"},"serviceType":{"id":"c2e3ab4d-5c97-35de-75f1-8ddadace1936"},"nostroAccountType":{"id":"de65257e-99f2-c10b-4fa8-8a5cdb53d2a2"},"legalEntity":{"id":"b7b7d1f2-578f-5a5e-58d1-832bed86e38d"},"currency":{"id":"5ebb5841-acda-a5cd-a89d-3ce44d810b59"},"systemAccountCode":{"id":"b03ada12-6c8e-37e4-974c-ce6fc8abcb62"},"legalEntityAccount":{"id":"1ad9c23d-2398-4bfc-1567-2e3d58149e26"},"accountOwner":{"id":"6663be3c-c499-260a-d729-2dd321e725f7"},"country":{"id":"fbd3106a-b2be-8dd8-9eda-e63d15d87fbe"},"client":{"id":"c62ec038-8d46-b115-35e5-5e31c58cc2aa"},"businessDate":{"id":"b8dbeecb-61e1-04ed-1b5d-9193c62d0172"},"correspondentType":{"id":"464c92cc-59e9-a377-6fdf-224a448cefbd"}},"systemParameter":{},"custom":{"page":{"fields":[null]},"pageSize":{"fields":[null]},"remoteSort":{"fields":[null]}}},"expectedResult":null,"syntax":"web-template","code":"corrbanks/rs/accountbalances?take=<%= parameter('take') %>&page=<%= custom('page') %>&pageSize=<%= custom('pageSize') %>&skip=0&<%= encodeAquariusSortParams(custom('remoteSort')) %>&serviceType=<%= parameter('serviceType') %>&nostroAccountType=<%= parameter('nostroAccountType') %>&legalEntity=<%= parameter('legalEntity') %>&currency=<%= parameter('currency') %>&systemAccountCode=<%= parameter('systemAccountCode') %>&legalEntityAccount=<%= parameter('legalEntityAccount') %>&accountOwner=<%= parameter('accountOwner') %>&country=<%= parameter('country') %>&client=<%= parameter('client') %>&businessDate=<%= format(parameter('businessDate'),'yyyy-MM-dd') %><%=(parameter('correspondentType') && parameter('correspondentType').trim().length>0)?'&correspondentType='+encodeURIComponent(parameter('correspondentType')):''%>"},"type":"Select","errorBypass":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{}},"expectedResult":null,"syntax":"standard","code":"{}"}},"insertCall":{"method":"Put","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Insert","errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"}},"updateCall":{"method":"Post","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Update","errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"}},"deleteCall":{"method":"Delete","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Delete","errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"}},"createCall":{"method":"Get","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Create","errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"}},"serverSideOptions":{"id":"7e9f4371-84b9-6494-cbb4-adcc831e3088","columns":[],"rows":[],"originalRows":[],"dataEntryRunTypes":[],"datasourceType":"Standard","autoRefreshEnabled":false,"autoRefreshSystem":false,"autoRefreshTime":60,"refreshOnLoad":false,"remoteSort":"","page":1,"isBusy":false,"isFiltered":false,"isServerSide":false,"hasError":false,"splitItems":[],"rowCount":100,"pageSize":10,"tags":[],"parameters":[]},"pageExp":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{"page":{"fields":[null]}}},"expectedResult":null,"syntax":"standard","code":"(custom('page')||1)"},"pageSizeExp":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{"pageSize":{"fields":[null]}}},"expectedResult":null,"syntax":"standard","code":"custom('pageSize')||10"},"recordCountExp":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{"result":{"fields":[null]}}},"expectedResult":null,"syntax":"standard","code":"(custom('result')||{}).total||0;"},"sortingExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"downloadExp":{"schema":{},"expectedResult":null,"syntax":"web-template"},"baseUrlId":"Aquarius Services","resultTypes":"Table"},"parameters":[{"id":"54d497d9-1aff-c1ae-9528-a711625e6af8","name":"take","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"10","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"4869e41a-3906-5971-2884-69891e0c44e9","name":"page","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"1","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"943d6321-1096-7158-b6e7-48171d5e545e","name":"pageSize","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"10","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"7e52c889-5316-bd39-62dd-54b099bfbc07","name":"skip","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"0","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"e3960213-23f5-2ca5-d3ba-3cbfe253597a","name":"sort[0][field]","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"countervalueBalance","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"c2e3ab4d-5c97-35de-75f1-8ddadace1936","name":"serviceType","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"CORR","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"de65257e-99f2-c10b-4fa8-8a5cdb53d2a2","name":"nostroAccountType","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"b7b7d1f2-578f-5a5e-58d1-832bed86e38d","name":"legalEntity","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"5ebb5841-acda-a5cd-a89d-3ce44d810b59","name":"currency","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"b03ada12-6c8e-37e4-974c-ce6fc8abcb62","name":"systemAccountCode","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"1ad9c23d-2398-4bfc-1567-2e3d58149e26","name":"legalEntityAccount","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"6663be3c-c499-260a-d729-2dd321e725f7","name":"accountOwner","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"fbd3106a-b2be-8dd8-9eda-e63d15d87fbe","name":"country","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"c62ec038-8d46-b115-35e5-5e31c58cc2aa","name":"client","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"b8dbeecb-61e1-04ed-1b5d-9193c62d0172","name":"businessDate","description":"","systemType":"","defaultValue":"1970-01-01T00:00:00.000Z","lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"date","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"2021-09-16T22:00:00.000Z","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"5f82475a-7286-1827-b49a-41ae4d6c5a8d","name":"sort[0][dir]","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"value":"desc","expression":{"schema":{},"expectedResult":null,"syntax":"standard"}},{"id":"464c92cc-59e9-a377-6fdf-224a448cefbd","name":"correspondentType","description":"","systemType":"","defaultValue":null,"lookupItems":[],"isHidden":false,"isMultiSelect":false,"isReadOnly":false,"isOptional":false,"popupWidth":300,"isSearchAllowed":false,"ravenParameterType":"normal","ravenDatatype":"string","lookup":{"mode":"standard","showSearchBox":true,"allowSort":true,"bindings":[],"columns":[]},"rules":[],"tags":[],"expression":{"schema":{},"expectedResult":null,"syntax":"standard"}}]}}