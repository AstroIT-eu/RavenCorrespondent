{"createdAt":"2021-10-08T12:23:18.621","modifiedAt":"2021-10-08T12:26:40.674","createdBy":"TAS","modifiedBy":"TAS","title":"SE - Payment Detail - PayOrigMessage","provider":"SpringBackendServiceProvider","tags":[],"systemTags":["services-editor","published-as-datasource","RESERVED_DOCUMENT"],"name":"SE - Payment Detail - PayOrigMessage","type":"services-editor","saved":true,"id":"cb7bd03d-82b6-a623-64c3-e31ecc67d84d","previewId":null,"content":{"definition":{"id":"cb7bd03d-82b6-a623-64c3-e31ecc67d84d","title":"SE - Payment Detail - PayOrigMessage","useBaseUrl":true,"publishAsDatasource":true,"serverSideDatasource":false,"dataEntryEnabled":false,"downloadEnabled":false,"expectedResultType":"Table","validated":true,"mandatoryParameters":[],"skipOnEmptyQueryString":false,"includeRawData":false,"emptyParametersToEmptyString":false,"schema":[{"name":"idAccount","type":"number","value":1300},{"name":"subCategory","type":"string","value":null},{"name":"notes","type":"string","value":null},{"name":"codAccountInstitution","type":"string","value":null},{"name":"codManualReleaseBo","type":"string","value":"MSG_RELEASED"},{"name":"source","type":"string","value":"AUTOMATIC"},{"name":"refTransaction","type":"string","value":"FT20211008085911"},{"name":"indAccountable","type":"string","value":"Y"},{"name":"forecastPaymentMappingCnt","type":"number","value":0},{"name":"indManualUpdate","type":"string","value":null},{"name":"tmsManualUpdate","type":"string","value":null},{"name":"messageType","type":"string","value":"MT103 Customer Payment"},{"name":"codOrderingInstitution","type":"string","value":null},{"name":"counterpart","type":"string","value":"BCITITM0XXXX"},{"name":"dtaValue","type":"string","value":"2021-10-08 00:00:00"},{"name":"codAccountService","type":"string","value":"2890920111"},{"name":"id","type":"number","value":3569},{"name":"credit","type":"string","value":null},{"name":"kind","type":"string","value":"monitorcashcbresource"},{"name":"statementMatched","type":"string","value":"N"},{"name":"tmsLastUpdateMsg","type":"string","value":"2021-10-08 09:02:05"},{"name":"msgSystemCode","type":"string","value":"MT900"},{"name":"priority","type":"string","value":null},{"name":"typeInternalAccount","type":"string","value":"CT"},{"name":"codReceiverCorrespondent","type":"string","value":null},{"name":"monitorCash","type":"object","value":{"subCategory":null,"codAccountInstitution":null,"codManualReleaseBo":"MSG_RELEASED","refTransaction":"FT20211008085911","endToEndId":"FT20211008085911","indAccountable":"Y","customCampoUtente10":null,"customCampoUtente12":null,"forecastPaymentMappingCnt":0,"tmsManualUpdate":null,"customCampoUtente11":null,"messageType":"MT103 Customer Payment","codOrderingInstitution":null,"codAuthorizationProfile":null,"id":3569,"customCampoUtente14":null,"customCampoUtente13":null,"customCampoUtente16":null,"creationDateTime":"2021-10-08 08:59:29","customCampoUtente15":null,"creditorAgent":null,"matchingIndicator":"N","statementMatched":"N","campoUtente8":null,"campoUtente7":null,"priority":null,"typeAuthorization":null,"campoUtente2":null,"campoUtente1":null,"campoUtente4":null,"campoUtente3":null,"campoUtente6":null,"tmsUpdate":"2021-10-08 09:02:05","campoUtente5":null,"creditor":null,"status":"SETTLED","indStandByPosition":"N","errorDescription":null,"debtorAgent":null,"customTypeOperation":null,"dtaAuthorization":"2021-10-08 00:00:00","codClientOnBehalf":null,"tmsExecution":"2021-10-08 09:01:00","dtaSettlement":"2021-10-08 00:00:00","tmsInsert":"2021-10-08 08:59:29","currency":"EUR","codBeneficiaryInstitution":null,"debit":488,"codBicPart":"BAMEITM0XXX","side":"D","delayIndicator":"IM","counterpartsCustomer":"IT12R0200802837000102015655","codUserAuthorization":"TLM","counterpartClient":null,"transactionType":null,"codIsin":null,"indCompliance":"R","reconciliationStatus":"NO","paymentForecastMappingCnt":0,"statementId":null,"holdIndicator":null,"codUser":"TLM","sendingRule":null,"idAccount":1300,"country":"IT","notes":null,"ultimateCreditor":null,"ncbresponsable":"BCITITM0XXX","errorCode":null,"source":"AUTOMATIC","codInternal":"LT2128113870836","instructingAgent":null,"qtaOrigSettlement":null,"indManualUpdate":null,"counterpart":"BCITITM0XXXX","dtaValue":"2021-10-08 00:00:00","codAccountService":"2890920111","credit":0,"tmsLastUpdateMsg":"2021-10-08 09:02:05","msgSystemCode":"MT900","typeInternalAccount":"CT","ultimateDebtor":null,"codReceiverCorrespondent":null,"indAuthNotesRules":null,"typeAccount":"CORR","codUetr":null,"idIntermediaryBank":null,"initiatingParty":null,"tmsMsgCreation":"2021-10-08 08:59:29","boReference":"FT20211008085911","codSenderCorrespondent":null,"codErrorByMsg":null,"debtor":null,"authNotes":null,"direction":"S","amount":488,"instructedAgent":null,"idCorporateActionEvent":null,"codIntCategory":null,"codIntSubCategory":null,"customCampoUtente01":null,"codAccountLe":"70200092","customCampoUtente07":null,"customCampoUtente06":null,"customCampoUtente09":null,"sourceName":null,"customCampoUtente08":null,"subtypeAccount":"NOSTRO","category":null,"customCampoUtente03":null,"indBalanceUpdate":"N","customCampoUtente02":null,"customCampoUtente05":null,"customer":"/IT74T0306912711000010359641","customCampoUtente04":null}},{"name":"tmsUpdate","type":"string","value":"2021-10-08 09:02:05"},{"name":"codUetr","type":"string","value":null},{"name":"idIntermediaryBank","type":"string","value":null},{"name":"status","type":"string","value":"SETTLED"},{"name":"indStandByPosition","type":"string","value":"N"},{"name":"customTypeOperation","type":"string","value":null},{"name":"boReference","type":"string","value":"FT20211008085911"},{"name":"codSenderCorrespondent","type":"string","value":null},{"name":"codClientOnBehalf","type":"string","value":null},{"name":"codErrorByMsg","type":"string","value":null},{"name":"tmsExecution","type":"string","value":"2021-10-08 09:01:00"},{"name":"dtaSettlement","type":"string","value":"2021-10-08 00:00:00"},{"name":"tmsInsert","type":"string","value":"2021-10-08 08:59:29"},{"name":"authNotes","type":"string","value":null},{"name":"currency","type":"string","value":"EUR"},{"name":"codBeneficiaryInstitution","type":"string","value":null},{"name":"debit","type":"number","value":488},{"name":"codBicPart","type":"string","value":"BAMEITM0XXX"},{"name":"direction","type":"string","value":"S"},{"name":"side","type":"string","value":"Debit"},{"name":"amount","type":"number","value":488},{"name":"delayIndicator","type":"string","value":"IM"},{"name":"counterpartsCustomer","type":"string","value":"IT12R0200802837000102015655"},{"name":"codIntCategory","type":"string","value":null},{"name":"idCorporateActionEvent","type":"string","value":null},{"name":"indCompliance","type":"string","value":"R"},{"name":"paymentForecastMappingCnt","type":"number","value":0},{"name":"reconciliationStatus","type":"string","value":"NO"},{"name":"codAccountLe","type":"string","value":"70200092"},{"name":"statementId","type":"string","value":null},{"name":"subtypeAccount","type":"string","value":"NOSTRO"},{"name":"category","type":"string","value":null},{"name":"codIntSubcategory","type":"string","value":null},{"name":"indBalanceUpdate","type":"string","value":"N"},{"name":"codUser","type":"string","value":"TLM"},{"name":"sendingRule","type":"string","value":null},{"name":"customer","type":"string","value":"/IT74T0306912711000010359641"},{"name":"idPayment","type":"number","value":3569},{"name":"settleFrom","type":"string","value":"2021-10-08 00:00:00"},{"name":"settleTo","type":"string","value":"2021-10-08 00:00:00"},{"name":"statusTranslated","type":"string","value":"Settled"},{"name":"reconcTranslated","type":"string","value":"No"}],"selectCall":{"method":"Get","enabled":true,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{"result":{"fields":[null]}}},"expectedResult":null,"syntax":"standard","code":"var result = toArray(custom('result'));\nvar statusTranslation = '';\nvar reconcTranslation = '';\n\nreturn result.map(function(i) {\n  i.idPayment = i.id;\n  i.settleFrom = i.dtaSettlement\n  i.settleTo = i.dtaSettlement\n  \n  var origStatus= i.status;\n\n  switch(origStatus) {\n      case 'TO_BE_AUTHORISED': {\n          statusTranslation = 'To be Authorised';\n          break;    \n      }\n      case 'SETTLED': {\n          statusTranslation = 'Settled';\n          break;    \n      }\n      case 'AUTHORISED': {\n          statusTranslation = 'Authorised';\n          break;    \n      }\n      case 'UNBLOCKED': {\n          statusTranslation = 'Unblocked';\n          break;    \n      }\n      case 'BLOCKED': {\n          statusTranslation = 'Blocked';\n          break;    \n      }\n      case 'SENT': {\n          statusTranslation = 'Sent';\n          break;    \n      }\n      case 'CANCELED': {\n          statusTranslation = 'Canceled';\n          break;    \n      }\n      case 'QUEUED': {\n          statusTranslation = 'Queued';\n          break;    \n      }\n      case 'REJECTED': {\n          statusTranslation = 'Rejected';\n          break;    \n      }\n      default:{statusTranslation = '';}\n\n  }\n  \n  var origReconciliation = i.reconciliationStatus;\n  \n  switch(origReconciliation) {\n      case 'NO':  { reconcTranslation = 'No'; break; }\n      case 'COMPLETED': { reconcTranslation = 'Completed'; break; }\n      case 'PARTIAL': { reconcTranslation = 'Partial'; break; }\n      default:{reconcTranslation = '';}\n  }\n  \n  \n  i.statusTranslated = statusTranslation;\n  i.reconcTranslated = reconcTranslation;\n  \n  return i;\n})"},"errorBypass":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{}},"expectedResult":null,"syntax":"standard","code":"[]"},"headers":[],"address":{"schema":{"datasource":{},"parameter":{"idPayOrig":{"id":"ed186325-83a2-0417-1a47-7e4e2727ad15"}},"systemParameter":{},"custom":{}},"expectedResult":null,"syntax":"web-template","code":"foundation/rs/monitorcashcb/<%= parameter('idPayOrig') %>"},"type":"Select"},"insertCall":{"method":"Put","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Insert"},"updateCall":{"method":"Post","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Update"},"deleteCall":{"method":"Delete","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Delete"},"createCall":{"method":"Get","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Create"},"serverSideOptions":{"id":"adda98c8-7647-2193-cc98-19eddd4354f9","columns":[],"rows":[],"originalRows":[],"dataEntryRunTypes":[],"datasourceType":"Standard","autoRefreshEnabled":false,"autoRefreshSystem":false,"autoRefreshTime":60,"refreshOnLoad":false,"remoteSort":"","page":1,"isBusy":false,"isFiltered":false,"isServerSide":false,"hasError":false,"splitItems":[],"rowCount":100,"pageSize":10,"tags":[],"parameters":[]},"pageExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"pageSizeExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"recordCountExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"sortingExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"downloadExp":{"schema":{},"expectedResult":null,"syntax":"web-template"},"resultTypes":"Table","baseUrlId":"Aquarius Services"},"parameters":[{"id":"ed186325-83a2-0417-1a47-7e4e2727ad15","name":"idPayOrig","description":"","ravenParameterType":"normal","ravenDatatype":"string","isMultiSelect":false,"placeholder":"","popupWidth":260,"value":"","lookup":{"mode":"standard","recursiveSelection":false},"lookupItems":[]}]}}