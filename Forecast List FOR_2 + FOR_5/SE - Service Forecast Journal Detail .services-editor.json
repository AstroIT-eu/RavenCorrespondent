{"createdAt":"2021-10-13T17:06:50.596","modifiedAt":"2021-10-13T17:06:50.596","createdBy":"TAS","modifiedBy":"TAS","title":"SE - Service Forecast Journal Detail ","provider":"SpringBackendServiceProvider","tags":[],"systemTags":["RESERVED_DOCUMENT","services-editor","published-as-datasource"],"name":"SE - Service Forecast Journal Detail ","type":"services-editor","saved":true,"id":"1b6cac31-3821-8269-76a0-e698119416aa","previewId":null,"content":{"definition":{"id":"1b6cac31-3821-8269-76a0-e698119416aa","title":"SE - Service Forecast Journal Detail ","useBaseUrl":true,"publishAsDatasource":true,"serverSideDatasource":false,"dataEntryEnabled":false,"downloadEnabled":false,"expectedResultType":"Table","validated":true,"mandatoryParameters":[],"skipOnEmptyQueryString":false,"includeRawData":false,"emptyParametersToEmptyString":false,"schema":[{"name":"indRecurring","type":"string","value":"N"},{"name":"subCategory","type":"string","value":null},{"name":"descServiceExt","type":"string","value":null},{"name":"dtaEffectiveSettlement","type":"string","value":null},{"name":"forecastAggregationMethod","type":"string","value":"SINGLE"},{"name":"beneficiaryCustomer","type":"string","value":null},{"name":"customCampoUtente10","type":"string","value":null},{"name":"codMessageType","type":"string","value":null},{"name":"customCampoUtente12","type":"string","value":null},{"name":"forecastPaymentMappingCnt","type":"string","value":null},{"name":"customCampoUtente11","type":"string","value":null},{"name":"codOrderingInstitution","type":"string","value":null},{"name":"descUnit","type":"string","value":null},{"name":"refExternal","type":"string","value":null},{"name":"id","type":"number","value":3225},{"name":"settlementCycle","type":"string","value":null},{"name":"customCampoUtente14","type":"string","value":null},{"name":"customCampoUtente13","type":"string","value":null},{"name":"customCampoUtente16","type":"string","value":null},{"name":"customCampoUtente15","type":"string","value":null},{"name":"settlCycle","type":"string","value":null},{"name":"timeCreation","type":"string","value":"00:00:00"},{"name":"codIntOperation","type":"string","value":null},{"name":"codCounterpartClient","type":"string","value":null},{"name":"codReceiver","type":"string","value":null},{"name":"typeForecast","type":"string","value":"LT"},{"name":"descDepartment","type":"string","value":null},{"name":"codAccountRel","type":"string","value":null},{"name":"campoUtente1","type":"string","value":null},{"name":"toBeSettledAmount","type":"number","value":333},{"name":"dtaCreation","type":"string","value":"2021-10-12 00:00:00"},{"name":"categoryStatus","type":"string","value":null},{"name":"tmsUpdate","type":"string","value":"2021-10-12 13:59:59"},{"name":"settlementSystem","type":"string","value":"CORR"},{"name":"forecastStatus","type":"string","value":"PREADVICE"},{"name":"idCashAccount","type":"number","value":1201},{"name":"customTypeOperation","type":"string","value":null},{"name":"otherReference3","type":"string","value":null},{"name":"dtaRecurringTo","type":"string","value":"2021-10-13 00:00:00"},{"name":"indMatching","type":"string","value":"N"},{"name":"indFail","type":"string","value":"N"},{"name":"idAncillarySystem","type":"string","value":null},{"name":"currency","type":"string","value":"AED"},{"name":"codBeneficiaryInstitution","type":"string","value":null},{"name":"nostroAccountType","type":"string","value":"CLEARER"},{"name":"otherReference2","type":"string","value":null},{"name":"otherReference1","type":"string","value":null},{"name":"dtaIntendedSettlement","type":"string","value":"2021-10-13 00:00:00"},{"name":"forecastVersion","type":"number","value":585},{"name":"origSettledAmount","type":"number","value":333},{"name":"paymentReference","type":"string","value":null},{"name":"descBranch","type":"string","value":null},{"name":"refForecast","type":"string","value":null},{"name":"codIsin","type":"string","value":"dedde"},{"name":"reconciliationStatus","type":"string","value":"NO"},{"name":"paymentForecastMappingCnt","type":"string","value":null},{"name":"indUpdateType","type":"string","value":"I"},{"name":"descCustomerIban","type":"string","value":null},{"name":"descBranchCounter","type":"string","value":null},{"name":"codUser","type":"string","value":"TAS"},{"name":"notes","type":"string","value":null},{"name":"source","type":"string","value":"Manual"},{"name":"codInternal","type":"string","value":"FO2021101213876074"},{"name":"codCounterpart","type":"string","value":null},{"name":"qtaOrigSettlement","type":"number","value":333},{"name":"indManualUpdate","type":"string","value":"Y"},{"name":"codService","type":"string","value":"CORR"},{"name":"origForeStatus","type":"string","value":"PREADVICE"},{"name":"clientPartyId","type":"string","value":null},{"name":"totSettledAmount","type":"string","value":null},{"name":"codSender","type":"string","value":null},{"name":"codBicLe","type":"string","value":"PARBFRP0XXX"},{"name":"systemAccountCode","type":"string","value":"000010000330554GCHF"},{"name":"kind","type":"string","value":"forecastresource"},{"name":"codCountry","type":"string","value":"FR"},{"name":"codIntermediary","type":"string","value":null},{"name":"cashAccountRef","type":"string","value":"000010000330554GCHF"},{"name":"indDebitCredit","type":"string","value":"A"},{"name":"securityAccount","type":"string","value":null},{"name":"cutOffTime","type":"string","value":null},{"name":"tmpReporting","type":"string","value":null},{"name":"dtaEffectiveSettl","type":"string","value":null},{"name":"ordinaryCustomer","type":"string","value":null},{"name":"refRelated","type":"string","value":null},{"name":"forecastMethod","type":"string","value":null},{"name":"idCorporateActionEventi","type":"string","value":null},{"name":"tmsMsgCreation","type":"string","value":null},{"name":"description","type":"string","value":null},{"name":"dtaIntendedSettl","type":"string","value":"2021-10-13 00:00:00"},{"name":"boReference","type":"string","value":null},{"name":"originalIsd","type":"string","value":"2021-10-13 00:00:00"},{"name":"typeCounterpart","type":"string","value":null},{"name":"owner","type":"string","value":"BAMEITM0XXX"},{"name":"dtaRecurringFrom","type":"string","value":"2021-10-13 00:00:00"},{"name":"codBicParty","type":"string","value":"BAMEITM0XXX"},{"name":"codIntCategory","type":"string","value":"AN2128113870908"},{"name":"codIntSubCategory","type":"string","value":null},{"name":"customCampoUtente01","type":"string","value":null},{"name":"codAccountLe","type":"string","value":"70201131"},{"name":"customCampoUtente07","type":"string","value":null},{"name":"customCampoUtente06","type":"string","value":null},{"name":"customCampoUtente09","type":"string","value":null},{"name":"customCampoUtente08","type":"string","value":null},{"name":"subtypeAccount","type":"string","value":"NOSTRO"},{"name":"category","type":"string","value":"BANCA"},{"name":"customCampoUtente03","type":"string","value":null},{"name":"user","type":"string","value":null},{"name":"customCampoUtente02","type":"string","value":null},{"name":"customCampoUtente05","type":"string","value":null},{"name":"customCampoUtente04","type":"string","value":null},{"name":"settleFrom","type":"string","value":"2021-10-13 00:00:00"},{"name":"settleTo","type":"string","value":"2021-10-13 00:00:00"},{"name":"amountFrom","type":"number","value":333},{"name":"amountTo","type":"number","value":333},{"name":"debCredTranslation","type":"string","value":"Credit"},{"name":"reconcTranslated","type":"string","value":"No"}],"selectCall":{"method":"Get","enabled":true,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{"result":{"fields":[null]}}},"expectedResult":null,"syntax":"standard","code":"var result = toArray(custom('result'));\nvar debCredTransl = '';\nvar reconcTransl = '';\n\nreturn result.map(function(i) {\n  var origDebitCredit = i.indDebitCredit;\n  var origReconc = i.reconciliationStatus;\n  i.settleFrom = i.dtaIntendedSettlement\n  i.settleTo = i.dtaIntendedSettlement\n  i.amountFrom = i.origSettledAmount\n  i.amountTo = i.origSettledAmount\n  \n  if(i.tmpReporting) {\n  \tvar a = i.tmpReporting.split(' ')\n\n  \ti.splittedTime = a[1].replaceAll(':', '')\n  }\n  \n  switch(origDebitCredit) {\n    case 'D': {\n      debCredTransl = 'Debit';\n      break;\n    }\n    case 'A': {\n      debCredTransl = 'Credit';\n      break;\n    }\n  }\n  \n  i.debCredTranslation = debCredTransl;\n  \n  switch(origReconc) {\n    case 'COMPLETED': {\n      reconcTransl = 'Completed';\n      break;\n    }\n    case 'NO': {\n      reconcTransl = 'No';\n      break;\n    }\n    case 'PARTIAL': {\n      reconcTransl = 'Partial';\n      break;\n    }\n  }\n  \n  i.reconcTranslated = reconcTransl;\n    \n  return i;  \n});"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{"datasource":{},"parameter":{},"systemParameter":{},"custom":{}},"expectedResult":null,"syntax":"web-template","code":"foundation/rs/forecast/<%= parameter('idForecastJournal') %>"},"type":"Select"},"insertCall":{"method":"Put","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Insert"},"updateCall":{"method":"Post","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Update"},"deleteCall":{"method":"Delete","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Delete"},"createCall":{"method":"Get","enabled":false,"serverSide":false,"serverSideUrlParametersEncoded":false,"serverSideUseCallerHeaders":false,"virtual":false,"responseType":"json","transformerOut":{"schema":{},"expectedResult":null,"syntax":"standard","code":"{}"},"transformerIn":{"schema":{},"expectedResult":null,"syntax":"standard","code":"custom('result');"},"errorBypass":{"schema":{},"expectedResult":null,"syntax":"standard"},"headers":[],"address":{"schema":{},"expectedResult":null,"syntax":"web-template"},"type":"Create"},"serverSideOptions":{"id":"b4eb81d5-bb7b-de5a-1222-83a52b3b41b5","columns":[],"rows":[],"originalRows":[],"dataEntryRunTypes":[],"datasourceType":"Standard","autoRefreshEnabled":false,"autoRefreshSystem":false,"autoRefreshTime":60,"refreshOnLoad":false,"remoteSort":"","page":1,"isBusy":false,"isFiltered":false,"isServerSide":false,"hasError":false,"splitItems":[],"rowCount":100,"pageSize":10,"tags":[],"parameters":[]},"pageExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"pageSizeExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"recordCountExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"sortingExp":{"schema":{},"expectedResult":null,"syntax":"standard"},"downloadExp":{"schema":{},"expectedResult":null,"syntax":"web-template"},"resultTypes":"Table","baseUrlId":"Aquarius Services"},"parameters":[{"id":"597153f3-eeaf-4284-3cd1-371248c1d101","name":"idForecastJournal","description":"","ravenParameterType":"normal","ravenDatatype":"string","isMultiSelect":false,"placeholder":"","popupWidth":260,"value":"3225","lookup":{"mode":"standard","recursiveSelection":false},"lookupItems":[]}]}}